---
title: MongoDB八股
tags:
  - 基础知识
  - Database
  - MongoDB
categories:
  - 后端
  - Database
  - MongoDB
date: 2023-11-15 15:33:48
---
## ReadMe

## 基础
### 基本概念
定义：MongoDB是一个基于分布式文件存储的开源NoSQL数据库系统(c++)，提供面向文档的存储方式，支持“无模式”的数据建模。是文档类型数据库。在高负载的情况下，支持水平高负载和高可用（方便添加更多的节点），可以用于代替传统的关系型数据库或键值存储方式。
#### 存储结构
文档：最基本的单元，由BSON键值对组成，类似关系数据库中的行。字段的值可能包括其他文档、数组和文档数组。
集合：一个集合可以包含多个文档，类似table（可以插入不同格式和类型的数据）。
数据库：一个数据库可以包含多个集合。（保留的数据库【admin, local, config, test】）。


#### BSON

- 数据记录存储为文档——记录就是一个BSON文档，由键值对组成的数据结构，是MongoDB的基本数据单元。
- 模式自由——不需要定义任何模式，用更少的数据对象比凹陷负载的领域模型。
- 支持多种查询方式——支持CRUD操作以及数据聚合、文本搜索。
- 支持ACID事务——
- 高效的二进制存储——键值对形式存在，键用于标识文档，一般式ObjectjId类型，值是以BSON形式存在。
- 支持多种类型索引——包括单字段索引、复合索引、多键索引、哈希索引等。
- 支持分片集群——MongoDN支持集群自动切分数据，让集群存储更多的数据，在数据插入和更新时，能自动路由和存储。
- 支持存储大文件——不超过16MB，超过的通过GridFS存储，进行分块处理。
#### 聚合
定义：将多个文档或集合汇总计算（求和、取最大值），被称之为聚合操作

聚合管道——由多个阶段组成，每个阶段在文档通过管道时转换文档。每个阶段接收前一阶段的输出，处理数据，输入下一个阶段

[聚合管道阶段操作符](https://javaguide.cn/database/mongodb/mongodb-questions-01.html#mongodb-%E6%8F%90%E4%BE%9B%E4%BA%86%E5%93%AA%E5%87%A0%E7%A7%8D%E6%89%A7%E8%A1%8C%E8%81%9A%E5%90%88%E7%9A%84%E6%96%B9%E6%B3%95)

单一目的聚合方法——单一作用的聚合函数，例如count()   distinct()
### 怎么使用
### 问题

## A(原子性)
## C(一致性)
## 事务(隔离性)


## 索引(持久性)
### 分类
 - 单字段索引，建立在单个字段上的索引，索引创建的排序顺序无所谓，MongoDB可以从头/尾开始遍历
 - 复合索引，建立在多个字段上的索引，组合索引，联合索引
 - 多键索引，MongoDB的一个字段是数组时，对数组的每个值创建索引
 - 哈希索引，按数据的哈希值索引，用在哈希分片集群上
 - 文本索引，
 - 唯一索引，确保索引字段不会存储重复值
 - TTL索引，用于过期机制
#### 复合索引使用
#### 覆盖索引查询
#### 索引交集



